<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <title>Five Computers &middot; Articles by GordonMcGregor</title>
        <link rel="shortcut icon" href="http://fivecomputers.com/favicon.ico" />
        <link href="http://fivecomputers.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Five Computers Atom Feed" />
                
        <link rel="stylesheet" href="http://fivecomputers.com/theme/css/screen.css" type="text/css" />
        <link rel="stylesheet" href="http://fivecomputers.com/theme/css/pygments.css" type="text/css" />


    </head>
    <body>
        <div id="header">
            <ul id="nav">
                <li class="ephemeral selected"><a href="http://fivecomputers.com/author/gordonmcgregor.html">GordonMcGregor</a></li>
                <li><a href="http://fivecomputers.com">Home</a></li>
                <li><a href="http://fivecomputers.com/pages/about-gordon.html">About Gordon</a></li>
                <li><a href="http://fivecomputers.com/archives.html">Archives</a></li>
            </ul>
            <div class="header_box">
                <h1><a href="http://fivecomputers.com">Five Computers</a></h1>
            </div>
        </div>
        <div id="wrapper">
            <div id="content">
                <h4 class="date">Jul 15,  2008</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/soap-gets-in-your-eyes.html" rel="bookmark" title="Permanent Link to &quot;SOAP gets in your eyes&quot;">SOAP gets in your eyes</a>
                    </h2>
                    
                    <div style="text-align: center;">
  <a href="http://www.flickr.com/photos/52043707@N00/1511995758/"><img width="500" height="334" src="http://farm3.static.flickr.com/2141/1511995758_bca60a43b4.jpg" alt="lava" /></a>
</div>

<p>I have a few days between a recently finished contract and before I start the next one. I've decided to use that time to learn a bit of <a href="http://www.ruby-lang.org/en/">Ruby</a> and the <a href="http://www.rubyonrails.org/">Rails</a> framework for a small project. I'm putting something together to do time tracking and communicate with the <a href="http://www.projectorpsa.com/">Professional Services Automation software</a> that we use in <a href="http://www.verilab.com" title="Verilab, Inc.">Verilab</a>. As ever this sort of learning only really happens on an '<em>as-needed</em>' basis so I think that a small driver project will move things along.</p>

<p>One of the first things I've been working on is the underlying communications with the web services interface that Projector provides into their database. They use a <a href="http://en.wikipedia.org/wiki/SOAP">SOAP</a> interface, with a <a href="http://www.w3.org/TR/wsdl">Web Services Description Language (WSDL)</a> representation of the API. This WSDL file is a machine-readable, XML description of all of the API calls and expected types for those calls. You can interact with the SOAP interface directly, constructing the XML to place the request and then parsing the responses manually. However, that becomes painful very quickly, as the calls are very verbose and unwieldy. The solution is to use one of the various SOAP frameworks available, that interrogate the WSDL and then generate objects and methods to encapsulate the interface.<br /></p>

<p>This all seemed mostly reasonable and I got a copy of <a href="http://dev.ctor.org/soap4r"><em>soap4r</em></a> which is the default Ruby SOAP interface. The latest version supports two interfaces, dynamically parsing the WSDL and generating object factories, or a script that statically parses the WSDL and generates a variety of helper classes that can be used to build the SOAP calls.<br /></p>

<p>At this point, the almost total lack of documentation for <em>soap4r</em> started to bite me. There is plenty of sample code, assuming you only ever want to pass a string (like a stock ticker) and only ever really expect a single integer or float to come back (such as a stock price). Very few examples go much further than that, but the Projector SOAP API uses a variety of heavily nested complexTypes and it wasn't very clear at all how to access or manipulate them. I made the initial mistake of trying to use the dynamic WSDL parsing, but after a while switched to using the statically generated classes which helped somewhat. At least then I could read the source and see what the member variables were in the classes and also what the class names were. Part of the problem seems to be that the Ruby world prefers the <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">RESTful</a> approach to web services, so SOAP is something of an ugly step-child. But SOAP is what I have to work with to get the information I need.<br />
<br />
At one point, I abandoned the Ruby version and tried to build an equivalent set of queries in Python. I'm more familiar with that language and thought it might remove one of the levels of complexity from the problem. In the Python world, I tried using the <a href="https://fedorahosted.org/suds">SUDS</a> framework to manage the WSDL. In this case, SUDS only supports dynamic parsing of the WSDL file and this parsing is quite a computationally expensive task. It doesn't make for fast, iterative exploration when it takes about 30 seconds to start up the script each time. I wasn't able to pickle the results to cache the driver either. Again, the SUDS framework has a real dearth of documentation - in fact it is even more sparse than <em>soap4r</em>. However, poking around at the classes using the introspection features of Python helped me get a bit further along and also cast the Ruby experience in a different light. I was able to take what I'd learned in Python and apply it to the Ruby scripts and made quite a bit more progress.<br /></p>

<p>I've been learning bits and pieces of Ruby along the way, too. Ruby is also a dynamic language with introspection, so I was able to start poking around in the objects, printing out methods and instance_variables to see what was going on. The interactive command line in Python is fantastic for doing this sort of exploration. I haven't yet found an equivalently powerful command line/ interactive way of doing this sort of playing around in Ruby (feel free to let me know how!). By some trial and error and dumping objects along the way I was able to get the data I wanted.<br /></p>

<p>So a day and a half later, I now have a simple Ruby script that can talk to the ProjectorPSA SOAP API and query the list of active projects, then print out and count that list. Painful to get up the learning curve, but now at least I know how to work with the SOAP framework and make the method calls that I need. The equivalent Python script is almost there, but with a missing namespace in the generated XML that I haven't quite worked out how to control from the other side of the SUDS framework.<br /></p>

<p style="text-align: left;">Overall, SOAP still seems very verbose and complex, for what it does - layers of objects, lots of XML, just to do very simple queries. A simple method invocation such as:</p>

<pre>
<code>&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;env:Header&gt;
        &lt;n1:OpsAuthenticationHeader 
            xmlns:n1="http://www.opsplanning.com/webservices/public/data"
            env:mustUnderstand="0"&gt;
          &lt;n1:EmailAddress&gt;REMOVED&lt;/n1:EmailAddress&gt;
          &lt;n1:Password&gt;REMOVED&lt;/n1:Password&gt;
          &lt;n1:AccountName&gt;verilab&lt;/n1:AccountName&gt;
        &lt;/n1:OpsAuthenticationHeader&gt;
  &lt;/env:Header&gt;
  &lt;env:Body&gt;
    &lt;n2:ExportProjectList 
       xmlns:n2="http://www.opsplanning.com/webservices/public/data"&gt;
      &lt;n2:request xsi:type="n2:ExportProjectListRq"&gt;
        &lt;n2:Parameters&gt;
          &lt;n2:LimitToOpenForTimeOnly&gt;true&lt;/n2:LimitToOpenForTimeOnly&gt;
          &lt;n2:LimitToOpenForCostOnly&gt;true&lt;/n2:LimitToOpenForCostOnly&gt;
          &lt;n2:MaxRowsToReturn&gt;200&lt;/n2:MaxRowsToReturn&gt;
          &lt;n2:OnlyCountRows&gt;false&lt;/n2:OnlyCountRows&gt;
        &lt;/n2:Parameters&gt;
      &lt;/n2:request&gt;
    &lt;/n2:ExportProjectList&gt;
  &lt;/env:Body&gt;
&lt;/env:Envelope&gt;

</code>
</pre>

<p>The Ruby code to generate this one remote procedure call is equally verbose, even with all the auto generated code within the <em>soap4r</em> framework:
<pre>
require 'rubygems'
gem 'soap4r'
require 'soap/wsdlDriver'
require 'soap/header/simplehandler'
require 'defaultDriver'</p>
<h1>new authentication class to construct proper SOAP Authentication header for</h1>
<h1>each access to the server</h1>
<h1>this is idiomatic for the soap4r framework - it is what it is</h1>
<p>class ClientAuthHeaderHandler &lt; SOAP::Header::SimpleHandler
  def initialize(userid, passwd)
    super(XSD::QName.new("http://www.opsplanning.com/webservices/public/data", 
                         "OpsAuthenticationHeader"))
    @sessionid = nil
    @userid = userid
    @passwd = passwd
  end</p>
<p>def on_simple_outbound
    if @sessionid
      { "sessionid" =&gt; @sessionid }
    else
      { "AccountName" =&gt; "verilab", "EmailAddress" =&gt; @userid, 
        "Password" =&gt; @passwd }
    end
  end</p>
<p>def on_simple_inbound(my_header, mustunderstand)
    @sessionid = my_header["sessionid"]
  end
end</p>
<h1>make sure everything is unicode-friendly, just in case</h1>
<p>XSD::Charset.encoding = 'UTF8'</p>
<h1>create the SOAP driver object to handle the requests</h1>
<p>endpoint_url = ARGV.shift
driver = OpsProjectorSvcSoap.new(endpoint_url)</p>
<h1>enable debug output (showing SOAP XML) if you run this script with ruby -d</h1>
<p>driver.wiredump_dev = STDOUT if $DEBUG</p>
<h1>set up authentication object</h1>
<p>user = "account name here"</p>
<h1>uncomment to prompt for the password each time the script runs</h1>
<p>passwd = ask("Password:") { |q| q.echo = false } </p>
<h1>create the authentication token and stuff it into the driver's</h1>
<h1>header for every SOAP request that gets generated</h1>
<p>auth = ClientAuthHeaderHandler.new user, passwd
driver.headerhandler &lt;&lt; auth</p>
<h1>Wrap the request in a Rq object, inside an ExportProjectList object</h1>
<h1>means it all unrolls to be the correct SOAP/XML. There may be a more direct</h1>
<h1>way to do this from just the ExportProjectList and property setting?</h1>
<h1>:LimitToOpenForTimeOnly =&gt; true ???</h1>
<p>req = ExportProjectList.new(
        ExportProjectListRq.new(
            ExportProjectListRequest.new(true, true, nil, 2000000, nil, false) ) )</p>
<h1>make the SOAP call, and extract the exportProjectListResult object</h1>
<p>result = driver.exportProjectList(req).exportProjectListResult</p>
<h1>display project list. The hierarchy can be intuited from the various bits of ruby</h1>
<h1>generated by the wsdl2ruby.rb script (defaultMappingRegistry.rb, default.rb et al)</h1>
<p>result.data.projectList.project.each { |project| print_project(project) }</p>
<p></pre>The analogous Python code is similarly wordy. As our very bright admin, Will, says about SOAP '<em>run away, run away</em>'</p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/soap-gets-in-your-eyes.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/soap-gets-in-your-eyes.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/15.html" rel="tag">15</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/software.html">software</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Apr 26,  2012</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/sshfs-for-os-x-lion.html" rel="bookmark" title="Permanent Link to &quot;sshfs for OS X Lion&quot;">sshfs for OS X Lion</a>
                    </h2>
                    
                    <p>Installed the latest version of fuse and sshfs, using <a href="http://mxcl.github.com/homebrew/">Homebrew</a>. I had been using FUSE for a while with previous versions of OS X, but haven't had much luck under Lion. Tried again today, using <a href="http://fuse4x.org/">Fuse4x</a>, rather than libFUSE and everything worked very transparently:</p>

<pre>
brew install fuse4x sshfs
</pre>

<p><strike>and that was it!</strike><strike><br /></strike> No, of course that wasn't true. First I had to re-update my Xcode command-line tools. This then removed autoreconf which Apple no longer provide as part of their <a href="http://brianpeddle.com/tag/autoreconf/">XCode tools bundle</a> [in neither the command line, or GUI release]. So, via Google, I find you have to install a different set of <a href="https://github.com/kennethreitz/osx-gcc-installer/downloads">gcc tools</a>, not shipped by Apple. Then, back to the brew install command line above, and things are a lot happier.<br />
<strike>and that was it!</strike><strike><br /></strike> Well, except you really do need to read the installation message which says<br />
<pre>
==&gt; Caveats
</pre>
<pre>
   Make sure to follow the directions given by <code>brew info fuse4x-kext</code>before trying to use a FUSE-based filesystem.<br />
</pre><br />
Then if you type<br />
<pre>
brew info fuse4x-kext
</pre><br />
You find you need to run the following two commands to get anything to actually work:<br />
<pre>
sudo cp -rfX /usr/local/Cellar/fuse4x-kext/0.8.14/Library/Extensions/fuse4x.kext /System/Library/Extensions 
sudo chmod +s /System/Library/Extensions/fuse4x.kext/Support/load_fuse4x
</pre>and that was it!<br />
<br />
No really, it was. Then I was able to mount remote directories, with the simple command:<br />
<pre>
sshfs &lt;remote_host&gt;:&lt;remote_path&gt; &lt;local_path&gt;
</pre><br />
and it actually worked!<br />
To unmount a mounted partition, use the standard<br />
<br />
<pre>
umount &lt;local_path&gt; 
</pre>
<pre>
<br />
</pre>
<pre>
<br />
</pre></p>
<div class="posttagsblock"><a href="http://technorati.com/tag/geekery" rel="tag">geekery</a>, <a href="http://technorati.com/tag/OSX" rel="tag">OSX</a></div>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/sshfs-for-os-x-lion.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/sshfs-for-os-x-lion.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/26.html" rel="tag">26</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/.html"></a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Feb 16,  2009</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/stop-search.html" rel="bookmark" title="Permanent Link to &quot;stop & search&quot;">stop & search</a>
                    </h2>
                    
                    <p style="text-align: center;"><a href="http://www.flickr.com/photos/52043707@N00/3273528803/"><img src="http://farm4.static.flickr.com/3477/3273528803_32f5d4ac34.jpg" height="500" width="375" alt="a cold day in London" /></a><br /></p>

<p>One of the least enjoyable experiences on a recent trip to London, last week, happened while I was taking pictures of the London eye. I was standing a few hundred meters away, shooting with a normal point and shoot camera, just like all the people around me, when a couple of police officers approached me. <a href="http://www.guardian.co.uk/commentisfree/libertycentral/2009/jan/19/stop-and-search-civil-liberties-law">I'd heard about photographers being hassled in London</a> but was surprised this managed to happen to me within 48 hours of arriving in the city. They started out by saying that '<em>they didn't really believe I was a terrorist, but were stopping photographers to make people aware that they were watching what was going on</em>'. From there, they handed me a form that listed my rights under section s44 of the anti-terrorism law then proceeded to question me about what I was doing, where I was from, why I was taking pictures.</p>

<p>As far as I can tell, even though they themselves said they have no reasonable clause, <a href="http://www.theregister.co.uk/2009/01/26/met_so44_touchy_feely/">the Terrorism act says that's fine</a>. We spent about 5 minutes going through where I've lived and having me justify why I take pictures. Then they wanted to see all the pictures I'd been taking (again, as far as I can tell, in contradiction of their own guidelines on collection of evidence). On looking through the images, one of the officers stated that '<em>those look just like the sorts of pictures a terrorist would take</em>' and then told me to move on. The picture above is what I was taking, when the stopped me. I got a '<em>stop and search</em>' form listing that the stop was authorised under the anti-terrorism laws and that was part of a '<em>pre-planned op</em>'. I can only assume from that they the London police have decided to institutionalise harassing photographers for the sake of &nbsp;&nbsp;<a href="http://www.schneier.com/blog/archives/2006/08/terrorism_secur.html">security theatre</a>. Particularly, if when they find images that they think would be typical terrorist images, they wave the photographer on.</p>

<p>This is all in a city that seems to have more CCTV cameras everywhere than there are people. I'm not quite sure who if anyone is actually watching these camera feeds. The whole thing is quite worrying, for someone who has been out of the UK for a few years. We used to <a href="http://vids.myspace.com/index.cfm?fuseaction=vids.individual&amp;videoid=6914184">make jokes</a> about books like <em>1984</em> or movies like <em>V for Vendetta</em> but it seems that piece by piece typical rights to privacy are being whittled away by a government that is using good intentions to grab as much additional powers as possible. Sure, it is just hassling a photographer in the street, taking pictures of a tourist attraction for no reason, but each time has an increasing chilling effect on what people feel they can do and what government authorities can get away with doing. I didn't argue with the particular officers, mainly as I didn't want to spend half my day discussing it in a police station on my holiday. Maybe that's part of the problem too.</p>

<p><em>'There's an implicit admission that Section 44 stops and searches do not detect terrorists. This is borne out by the available data. In the financial years 2003/4 to 2006/7, the Met stopped and searched 31,797 pedestrians using the powers of Section 44(2); of these only 79 were arrested in connection with terrorism - less than a quarter of a percent - and even fewer will be convicted. The purpose of deterring is feeble considering the extent to which the Home Office is ready to go to avoid revealing when and where the exceptional powers for Section 44 apply.'</em></p>

<p>At the end of this five minute waste of time, they started asking me about the number of megapixels my camera had, commented on how impressed they were by the quality of the pictures on the screen and asked where they could buy one and if I'd recommend it.</p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/stop-search.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/stop-search.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/16.html" rel="tag">16</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/current-affairs.html">current affairs</a>
                            <a href="http://fivecomputers.com/tag/thingumyjigs.html">thingumyjigs</a>
                            <a href="http://fivecomputers.com/tag/travel.html">travel</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Apr 19,  2012</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/systemverilog-support-in-pygments.html" rel="bookmark" title="Permanent Link to &quot;SystemVerilog support in Pygments&quot;">SystemVerilog support in Pygments</a>
                    </h2>
                    
                    <p><a href="http://www.flickr.com/photos/mcgregorphoto/6949231074/" title="svforpygments by Gordon McGregor, on Flickr"><img alt="svforpygments" src="http://farm6.staticflickr.com/5454/6949231074_4dd2096121_c.jpg" width="720" /></a></p>

<p>I&#39;ve used <a href="http://pygments.org/">Pygments</a> in the past to do syntax highlighting of Python and C code to drop into documentation. I&#39;ve wanted SystemVerilog support for a while, but the tool didn&#39;t <a href="http://pygments.org/languages/">support the language</a>. I eventually got frustrated enough by this to go and add it myself. The motivation was so that I could set up an internal <a href="http://paste.pocoo.org/about/">LodgeIt! pastebin</a> to allow colleagues to discuss snippets of code, without having to paste it into emails, or Yammer discussions, both of which always scramble formatting and make discussions harder than they should be. The pastebin that I decided to use, used Pygments as the backend, so I decided to add SystemVerilog support to that project.</p>

<p>The main task was adding the <a href="https://twitter.com/#!/GordonMcGregor/status/104282867168845825">more than 220 keywords</a> in SystemVerilog into the format required for Pygments. I ended up cutting and pasting the keywords from the specification into a text file, then using a quick script to generate the <a href="https://bitbucket.org/birkenfeld/pygments-main/src/96e8b9cb83ef/pygments/lexers/hdl.py">appropriate structures</a> for Pygments. I found that generating it automatically was about the only way to avoid typos and saved quite a bit of time and typing.</p>

<p>If you&#39;d like to try it out, installation is straightforward:</p>

<div class="highlight">
<pre><span class="n">hg</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bitbucket</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">birkenfeld</span><span class="o">/</span><span class="n">pygments</span><span class="o">-</span><span class="n">main</span> <span class="n">pygments</span>
<span class="n">cd</span> <span class="n">pygments</span>
<span class="n">sudo</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre>
</div>

<p>After that, you just run the &#39;pygmentize&#39; command to see formatted source code.</p>

<pre>pygmentize hello_world.sv
</pre>

<p>This sample below comes from the UVM source code &#39;hello_world.sv&#39; example.</p>

<p><span style="font-family: monospace; white-space: pre;"><span style="color: #008000; font-weight: bold;">module</span> hello_world;</span></p>

<div class="highlight">
<pre>  <span style="color: #008000; font-weight: bold;">import</span> <span style="color: #0000ff; font-weight: bold;">uvm_pkg::*</span>;
  <span style="color: #880000;">`include</span> <span style="color: #ba2121;">&quot;uvm_macros.svh&quot;</span>

  <span style="color: #880000;">`include</span> <span style="color: #ba2121;">&quot;packet.sv&quot;</span>
  <span style="color: #880000;">`include</span> <span style="color: #ba2121;">&quot;producer.sv&quot;</span>
  <span style="color: #880000;">`include</span> <span style="color: #ba2121;">&quot;consumer.sv&quot;</span>
  <span style="color: #880000;">`include</span> <span style="color: #ba2121;">&quot;top.sv&quot;</span>

  top mytop;

  <span style="color: #008000; font-weight: bold;">initial</span> <span style="color: #008000; font-weight: bold;">begin</span>
    <span>$</span>timeformat(<span style="color: #666666;">-9</span>,<span style="color: #666666;">0</span>,<span style="color: #ba2121;">&quot; ns&quot;</span>,<span style="color: #666666;">5</span>);
    uvm_default_table_printer.knobs.name_width<span style="color: #666666;">=20</span>;
    uvm_default_table_printer.knobs.type_width<span style="color: #666666;">=50</span>;
    uvm_default_table_printer.knobs.size_width<span style="color: #666666;">=10</span>;
    uvm_default_table_printer.knobs.value_width<span style="color: #666666;">=14</span>;
    set_config_int(<span style="color: #ba2121;">&quot;top.producer1&quot;</span>,<span style="color: #ba2121;">&quot;num_packets&quot;</span>,<span style="color: #666666;">2</span>);
    set_config_int(<span style="color: #ba2121;">&quot;top.producer2&quot;</span>,<span style="color: #ba2121;">&quot;num_packets&quot;</span>,<span style="color: #666666;">4</span>);
    set_config_int(<span style="color: #ba2121;">&quot;*&quot;</span>,<span style="color: #ba2121;">&quot;recording_detail&quot;</span>,<span style="color: #880000;">UVM_LOW</span>);
    <span style="color: #408080; font-style: italic;">//uvm_default_printer = uvm_default_tree_printer;</span>
    uvm_default_printer.knobs.reference<span style="color: #666666;">=0</span>;
    mytop <span style="color: #666666;">=</span> <span style="color: #008000; font-weight: bold;">new</span>(<span style="color: #ba2121;">&quot;top&quot;</span>); 
    uvm_default_table_printer.knobs.type_width<span style="color: #666666;">=20</span>;
    run_test();
  <span style="color: #008000; font-weight: bold;">end</span>
<span style="color: #008000; font-weight: bold;">endmodule</span>
</pre>
</div>

<p>A further challenge is working out how to embed this sort of code snippet into a TypePad blog post. In general, Pygments generates html code with CSS styles and classes. This doesn&#39;t play well with TypePad which seems to consume or remove the CSS styles. You can however get Pygments to generate inline styles, which can then be pasted into TypePad. The syntax for this is:</p>

<pre>pygmentize -f html -Ofull,noclasses hello_world.sv
</pre>

<p>And then the output html can be pasted straight into an HTML editor.</p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/systemverilog-support-in-pygments.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/systemverilog-support-in-pygments.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/19.html" rel="tag">19</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/.html"></a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Feb 23,  2009</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/the-death-of-books.html" rel="bookmark" title="Permanent Link to &quot;the death of books&quot;">the death of books</a>
                    </h2>
                    
                    <p><a href="http://www.flickr.com/photos/52043707@N00/2331801711/"><img src="http://farm3.static.flickr.com/2050/2331801711_07616a0808.jpg" height="500" width="429" alt="ghost rider" /></a><br />
<blockquote>
  <p style="text-align: center;"><em>The reports of my death are greatly exaggerated</em></p></p>
<p><p style="text-align: right;"><span style="font-size: 10px;">- Mark Twain</span></p>
</blockquote>It seems that <a href="http://www.npr.org/templates/story/story.php?storyId=99961163&amp;ft=1&amp;f=1003">some universities</a> are moving away from physical books, switching entirely to electronic textbooks. My initial reaction is that this is just a little bit crazy. Electronic reference materials have a place, but I have a real difficulty with only electronic textbooks as being the best approach. Certainly there is a financial justification and a reduction in the physical weight the students have to carry. There is no doubt an advantage for the book stores, having to carry less physical inventory and ship it around the country.<br />
<br />
But none of this takes into account how you interact with a physical book. It just isn't the same having the material online or on a PDF in a laptop. A screen is harder to read (a good laptop screen is still less than 100dpi, books and print are 300dpi or more) and as it is a lower resolution than printed material, you can only see a small amount of the information at a time. Diagrams and accompanying text are often hard to see all in one place. This is part of the reason why reading on a screen can be so tiring. Also the backlit text is harder on the eyes than reading from a page. The second drawback is how you physically interact with a book - flicking quickly through pages, marking pages with a highlighter, inserting post-it notes, curling up in a chair to read a book, spreading several books and notes out across a table. All of these metaphors may eventually be replaced with digital analogues that are as powerful or more so, but it seems we are quite far from that time.<br />
<br />
The Amazon Kindle is probably about as good as this gets just now and from what I can tell, it still falls far below a good hunk of printed tree. The Kindle does have a higher resolution screen, which helps with reading for a long time, but the screen is small and the navigation feels clunky. Laptops are worse.<br />
<br />
I do find a lot of value in online reference books. I've had a subscription to <a href="http://my.safaribooksonline.com/">O'Reilly's Safari</a> for over a year now and have found it to be invaluable, particularly when traveling. I can have access to a variety of reference texts, easily searchable, almost always available (if you have an internet connection). However, I've never been able to read any of the books I <a href="http://my.safaribooksonline.com/">have on my Safari subscription</a>, for more than a few pages. It just doesn't seem to work for me. No doubt I'm destined to become a relic in my views on reading, but it seems that we <a href="http://www.jmcolberg.com/weblog/2009/02/is_providing_access_enough.html">approach reading on a screen</a> differently to a book. I'd love to have some sort of larger Kindle device, linked to a Safari subscription. Some way to really read those books on Safari, rather than just treating them as reference works. It always feels that this is just right around the corner, yet we never quite get there.</p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/the-death-of-books.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/the-death-of-books.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/23.html" rel="tag">23</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/books.html">books</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Apr  8,  2008</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/time-tracking.html" rel="bookmark" title="Permanent Link to &quot;time tracking&quot;">time tracking</a>
                    </h2>
                    
                    <p><a href="http://www.flickr.com/photos/52043707@N00/368709837/"><img width="360" height="240" alt="Panamint" src="http://farm1.static.flickr.com/166/368709837_c0ff160659.jpg" /></a></p>

<p>One of the realities of doing consulting work is time tracking. I've used notebooks. I've used palm pilots, that I carried around only to track time. I've tried web based applications. Nothing quite does what I want it to do or is simple enough to keep out of the way. I've been playing around with Ruby and the Rails frameworks to come up with a solution that really does what I want. <a href="http://jexp.de/blog/archives/16-On-LEGO-Powered-Time-Tracking;-My-Daily-Column.html">Then I saw this</a>. I might have to re-think the whole thing. I'm particularly impressed with the image capture/ automatic entry.</p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/time-tracking.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/time-tracking.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/04.html" rel="tag">04</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/software.html">software</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Jul 14,  2008</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/unthinkable-futures-from-the-past.html" rel="bookmark" title="Permanent Link to &quot;unthinkable futures from the past&quot;">unthinkable futures from the past</a>
                    </h2>
                    
                    <p>I found this <a href="http://kk.org/ct2/2008/06/unthinkable-futures.php">list from 1993</a>, where Brian Eno and Kevin Kelly throw out wild and wacky things that might happen. Some of them seem a whole lot more likely from 15 years in the future. To me the ideas on the appeal of US citizenship seems to already be starting to happen, with an economy where multiple citizenship and an ability to easily move and work is a competitive advantage. The US tax laws in particular don't endear me to becoming a US or dual citizen.</p>

<p>
The idea of squatter's suburbs, where the more affluent return in droves to city centers, driven in part by rising gas prices, and displace the poor appears to be a quite likely outcome now. Probably not such a trend a decade and a half ago.
</p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/unthinkable-futures-from-the-past.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/unthinkable-futures-from-the-past.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/14.html" rel="tag">14</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/thingumyjigs.html">thingumyjigs</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Jul 11,  2008</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/viigo.html" rel="bookmark" title="Permanent Link to &quot;viigo&quot;">viigo</a>
                    </h2>
                    
                    <p>I've had a <a href="http://www.blackberry.com/blackberrycurve.shtml">Blackberry Curve</a> for a while. Really like having a real keyboard and the screen is big enough to actually browse web pages on and read quite a bit of text. However, the built-in web browser is about the worst I've ever used. Slow, clunky, painful. I have been using Google Reader's mobile view to catch up on RSS feeds and blogs while out and about. A few days ago I downloaded the free <a href="http://viigo.com/home">Viigo</a> feed reader. A huge improvement! Heartily recommend it.</p>

<p>The setup was a painful, as their web site wasn't particularly fast or flexible to edit feeds. Once I realised you could download an <a href="http://en.wikipedia.org/wiki/OPML">OMPL</a> format list from Google reader and upload it to Viigo things went much more smoothly. You can also link it directly to an aggregator feed, such as Google reader. This then keeps track of feeds that you add or remove from the other viewer, but it doesn't sync up what was read between each view, which would be a really nice feature.</p>

<p>Other than the setup issues, I've found it great to use. Clean interface, fast and without the pain of being in the browser environment. The price is good too!</p>

<p><br /></p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/viigo.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/viigo.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/07.html" rel="tag">07</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/software.html">software</a>
                            <a href="http://fivecomputers.com/tag/thingumyjigs.html">thingumyjigs</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Jun 17,  2008</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/visual-commitment.html" rel="bookmark" title="Permanent Link to &quot;visual commitment&quot;">visual commitment</a>
                    </h2>
                    
                    <p><a title="graphic by Gordon McGregor, on Flickr" href="http://www.flickr.com/photos/mcgregorphoto/2514642239/"><img width="500" height="333" alt="graphic" src="http://farm3.static.flickr.com/2006/2514642239_13100d1a20.jpg" /></a>
</p>

<p>I've had an on again/ off again interest in visualization tools to enhance design and verification for many years. I've written log file parsers to show data in a more friendly way to enhance debug, or TCL/Tk widgets that demonstrate activity on bus ports of a SystemC AMBA switch model. Tools that at first glance might seem somewhat pointless visual trinkets can really enhance debug, by letting the brain search for patterns more easily within data. For example, with the bus switch, it was visually easy to see which bus wasn't getting any traffic, which could have been extracted from a log, but would have required more thought. Patterns of burstiness or busyness can also be seen quite easily. Similar results can usually be achieved with grep or clever regular expressions, but I find I end up having to keep a lot more data in my head, which pushes out the brainpower I might apply to actually working on the real problem.</p>

<p>Well written visualisations present the data in a more accessible way, letting you get to the problems more quickly. A good example of these from the recent DAC are a couple of OCP tools by <a href="http://www.duolog.com/">Duolog</a>. The tools present typical OCP information in a more easily interpretable way, <a href="http://www.duolog.com/products/ocp-toolkit/conductor">colouring related transactions in a log file</a>, or <a href="http://www.duolog.com/products/ocp-toolkit/tracker">showing bus bandwidth</a>. It is much simpler to trace a series of transactions this way, or find buses that are being starved or overloaded. The information could have been directly extracted from the log file by the user, but the visualisations make things easier and quicker.</p>

<p>I've been playing around with&nbsp; <a href="http://www.flashdevelop.org/">Flash</a> and also just started reading about the <a href="http://processing.org/">Processing</a> language over the weekend. Co-incidentally, I happened across these <a href="http://vis.cs.ucdavis.edu/~ogawa/codeswarm/">visualisations of version control commits</a> for several large projects, written in Processing. These give a good indication of how visualisations can show a lot of very complex data in a more accessible way. <a href="http://www.vimeo.com/1093745">The Python visualisation</a> was particularly interesting to show how few contributers there were until an explosion of contributions around the year 2000 wander on to the stage.</p>

<p>As our SoC designs keep getting larger, I believe that more accessible means to interpret the verification and design data and results will be needed, beyond just waveforms and log traces. I would be interested to see what the ebb and flow of check-ins look like for a complex, modern SoC. We tend to think that hardware design is just the same as software design by another name, but you might start to see structural differences in how the code and modifications organise themselves. </p>

<p>The Python case shows one leader, banging away on their own, suddenly joined en mass when the code base becomes popular. SoCs will also probably demonstrate Conway's Law visually, mirroring the organisational structure that put the design together. Pairs of verification and design engineers working together, sub-assemblies, clustering around organisational and functional boundaries. The vast majority of changes would be much more localised than you see in a large software project such as Python. Quite possibly other software projects fall along similar modular designs but it would be instructive to see the visualisations side by side - perhaps with the organisational (or lack of) human structure overlaid.</p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/visual-commitment.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/visual-commitment.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/17.html" rel="tag">17</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/dac.html">dac</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Mar  6,  2008</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fivecomputers.com/visualising-complex-datasets.html" rel="bookmark" title="Permanent Link to &quot;visualising complex datasets&quot;">visualising complex datasets</a>
                    </h2>
                    
                    <p>A great example of the sort of insight that you can glean from a lot of data, with the right sort of visualisation.</p>

<p><object width="320" height="285" align="middle" id="VE_Player" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"><param value="http://static.videoegg.com/ted/flash/loader.swf" name="movie" /><param value="bgColor=FFFFFF&amp;file=http://static.videoegg.com/ted/movies/HANSROSLING_high.flv&amp;autoPlay=false&amp;fullscreenURL=http://static.videoegg.com/ted/flash/fullscreen.html&amp;forcePlay=false&amp;logo=&amp;allowFullscreen=true" name="FlashVars" /><param value="high" name="quality" /><param value="always" name="allowScriptAccess" /><param value="#FFFFFF" name="bgcolor" /><param value="noscale" name="scale" /><param value="window" name="wmode" /><embed width="320" height="285" align="middle" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" name="VE_Player" wmode="window" scale="noscale" bgcolor="#FFFFFF" allowscriptaccess="always" quality="high" flashvars="bgColor=FFFFFF&amp;file=http://static.videoegg.com/ted/movies/HANSROSLING_high.flv&amp;autoPlay=false&amp;fullscreenURL=http://static.videoegg.com/ted/flash/fullscreen.html&amp;forcePlay=false&amp;logo=&amp;allowFullscreen=true" src="http://static.videoegg.com/ted/flash/loader.swf"></embed></object></p>

                    <div class="clear"></div>
                    <p>There are <a href="http://fivecomputers.com/visualising-complex-datasets.html#disqus_thread">comments</a>.</p>
                    <div class="info">
                        <a href="http://fivecomputers.com/visualising-complex-datasets.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fivecomputers.com/category/03.html" rel="tag">03</a>                                                <div class="tags">
                            <a href="http://fivecomputers.com/tag/eda.html">eda</a>
                            <a href="http://fivecomputers.com/tag/software.html">software</a>
                            <a href="http://fivecomputers.com/tag/verification.html">verification</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <div class="clear"></div>
                <div class="pages">                
                    <a href="http://fivecomputers.com/author/gordonmcgregor3.html" class="prev_page">&larr;&nbsp;Previous</a>
                    <a href="http://fivecomputers.com/author/gordonmcgregor5.html" class="next_page">Next&nbsp;&rarr;</a>
                    <span>Page 4 of 5</span>
                </div>

                <div class="clear"></div>
                <div id="footer">
                    <p>
                    <a href="https://twitter.com/GordonMcGregor">Twitter @GordonMcGregor</a>
                    &middot;
                    <a class="atom" href="http://fivecomputers.com/feeds/all.atom.xml">RSS Feed</a>
                </div>
            </div>
            <div class="clear"></div>
        </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-42678190-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
<script type="text/javascript">
    var disqus_shortname = 'fivecomputers';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    </body>
</html>